!function(e,t){"use strict";var n={workerUrl:"https://unleashed-shopify-sync-v2.adrian-b0e.workers.dev/api/v2/data-fetch",buttonAttribute:"kilr-unleashed-sync",loadingClass:"kilr-sync-loading",successClass:"kilr-sync-success",errorClass:"kilr-sync-error"},s=t.createElement("style");function o(n,s){if(e.shopify&&e.shopify.toast)e.shopify.toast.show(n);else{var o=t.createElement("div");o.style.cssText="position:fixed;top:20px;right:20px;padding:16px 24px;background:"+("error"===s?"#f44336":"success"===s?"#4CAF50":"#2196F3")+";color:white;border-radius:4px;box-shadow:0 2px 5px rgba(0,0,0,0.2);z-index:10000;animation:kilr-notification 0.3s ease-out;",o.textContent=n,t.body.appendChild(o),setTimeout(function(){o.style.animation="kilr-notification-out 0.3s ease-in forwards",setTimeout(function(){o.remove()},300)},5e3)}}function r(e,t){e.classList.remove(n.loadingClass,n.successClass,n.errorClass);var s=e.getAttribute("data-original-text");"loading"===t?(s||e.setAttribute("data-original-text",e.textContent),e.classList.add(n.loadingClass),e.textContent="Syncing..."):"success"===t?(e.classList.add(n.successClass),e.textContent="Sync Complete",setTimeout(function(){e.classList.remove(n.successClass),e.textContent=s},2e3)):"error"===t&&(e.classList.add(n.errorClass),e.textContent="Sync Failed",setTimeout(function(){e.classList.remove(n.errorClass),e.textContent=s},2e3))}function i(e){if(!e.classList.contains(n.loadingClass)){var t=window.location.hostname;r(e,"loading"),fetch(n.workerUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:t})}).then(function(e){return e.json().then(function(t){if(!e.ok)throw new Error(t.error||"Sync failed");return t})}).then(function(t){t.success?(o("Successfully synced data from both systems","success"),r(e,"success")):(o(t.error||"Sync failed","error"),r(e,"error"))}).catch(function(t){console.error("Sync error:",t),o(t.message||"Failed to sync data","error"),r(e,"error")})}}function c(){for(var e=t.querySelectorAll("["+n.buttonAttribute+'="button"]'),s=0;s<e.length;s++){var o=e[s];o.hasAttribute("data-kilr-initialized")||(o.setAttribute("data-kilr-initialized","true"),o.addEventListener("click",i.bind(null,o)))}}s.textContent="."+n.loadingClass+"{opacity:.7;cursor:not-allowed;position:relative}."+n.loadingClass+"::after{content:'';position:absolute;width:16px;height:16px;top:50%;right:10px;transform:translateY(-50%);border:2px solid #fff;border-radius:50%;border-top-color:transparent;animation:kilr-spin 1s linear infinite}."+n.successClass+"{background-color:#4CAF50!important;border-color:#45a049!important}."+n.errorClass+"{background-color:#f44336!important;border-color:#da190b!important}@keyframes kilr-spin{to{transform:translateY(-50%) rotate(360deg)}}",t.head.appendChild(s),t.addEventListener("DOMContentLoaded",c);var a=new MutationObserver(function(){c()});a.observe(t.body,{childList:!0,subtree:!0}),e.configureUnleashedSync=function(e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])}}(window,document); 